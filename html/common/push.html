<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="renderer" content="webkit"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>上海厚步网络科技有限公司</title><link rel="shortcut icon" type="image/ico" href="http://git.bramble.wang/back/favicon.ico"><link rel="stylesheet" href="http://git.bramble.wang/back/css/main.css" media="all"><script>void 0===document.getElementsByClassName&&(location.href="http://git.bramble.wang/back/html/common/not_support.html")</script><style>.container{max-width:960px;margin:0 auto}input[type=color]{font-size:14px;box-sizing:border-box;width:100%;height:30px;vertical-align:middle;color:#333;border:1px solid #ccc;border-radius:3px;outline:0;background-color:#fff;-webkit-appearance:none;-webkit-tap-highlight-color:rgba(255,255,255,0)}.desc{color:#999}.message{border:1px solid #e7e7eb;margin:10px 5px}.message_type{color:#999;cursor:pointer;font-size:14px;line-height:30px}.message_type:first-child{text-indent:0}.message_type [type=radio]:checked~*,.message_type:hover .iconfont{color:#333}.grid .person_num{padding-left:20px;color:#999;margin-top:15px}.grid .person_num>span{padding:0 5px;color:#333;font-size:16px}.message_header{border-bottom:1px solid #e7e7eb;padding-left:10px;font-size:0;white-space:nowrap}.message_text .text_info_ct{padding:0}.message_text textarea{border:none;height:200px}.message_text .message_text_footer{border-top:1px solid #e7e7eb;padding-left:15px;position:relative}.message_text_footer .link2expression{cursor:pointer;font-size:20px;color:#999}.message_text_footer .link2expression.active,.message_text_footer .link2expression:hover{color:#333}.message_graphical{box-sizing:border-box;padding:100px 40px}.message_template{box-sizing:border-box;padding:20px 40px}.send_btn_ct{text-align:right}#sendMsg{padding:7px 25px;font-size:16px}.field{color:#4A4A4A}.field_sec{color:#7c7c7c}.temp_msg_item{padding:5px 0}@media (max-width:400px){.message_type{padding-right:0;text-indent:1em}}</style></head><body><aside class="sidebar"><div class="top_bar"><p class="logo"><i class="iconfont icon-95b"></i></p><i class="iconfont icon-7cd toggle_another_form"></i></div><ul class="menu"><li><a href="http://git.bramble.wang/back/html/table/user.html"><i class="iconfont icon-72b"></i><span class="title">用户</span><span class="arrow"></span></a></li><li><a href="http://git.bramble.wang/back/html/table/promoter.html"><i class="iconfont icon-680"></i><span class="title">推广人员</span><span class="arrow"></span></a></li><li><a href="http://git.bramble.wang/back/html/table/guest_user.html"><i class="iconfont icon-6a2"></i><span class="title">特邀用户</span><span class="arrow"></span></a></li><li><a href="http://git.bramble.wang/back/html/table/business.html"><i class="iconfont icon-66e"></i><span class="title">商务人员</span><span class="arrow"></span></a></li><li><a href="http://git.bramble.wang/back/html/table/adver.html"><i class="iconfont icon-675"></i><span class="title">广告主</span><span class="arrow"></span></a></li><li><a href="http://git.bramble.wang/back/html/table/task.html"><i class="iconfont icon-6cd"></i><span class="title">任务</span><span class="arrow"></span></a></li><li><a href="javascript:;"><i class="iconfont icon-889"></i><span class="title">报表</span><span class="arrow"></span></a><ul class="sub_menu"><li><a href="http://git.bramble.wang/back/html/report/guest_user.html" class="title">特邀用户报表</a></li><li><a href="http://git.bramble.wang/back/html/report/guest_user.html" class="title">特邀用户报表</a></li></ul></li><li class="active"><a href="http://git.bramble.wang/back/html/common/push.html"><i class="iconfont icon-8a6"></i><span class="title">推送</span><span class="arrow"></span></a></li><li><a href="http://git.bramble.wang/back/html/table/docking_list.html"><i class="iconfont icon-83c"></i><span class="title">对接</span><span class="arrow"></span></a></li><li><a href="javascript:;"><i class="iconfont icon-6b5"></i><span class="title">个人中心</span><span class="arrow"></span></a><ul class="sub_menu"><li><a href="http://git.bramble.wang/back/html/common/welcome.html" class="title">我的信息</a></li><li><a href="http://git.bramble.wang/back/html/common/welcome.html" class="title">修改密码</a></li><li><a href="http://git.bramble.wang/back/html/common/welcome.html" class="title">退出登录</a></li></ul></li></ul></aside><div class="content"><h1>推送消息 <small>-微信平台消息推送</small></h1><div class="container"><form id="form_query" class="grid"><div class="ct_6"><div class="desc">最高来赚版本</div><select id="app_version" name="app_version"><option value="">所有版本</option></select></div><div class="ct_6"><div class="desc">最低IOS版本</div><select id="sys_version" name="sys_version"><option value="">所有版本</option></select></div><div class="ct_6"><div class="desc">最后登录时间</div><select id="login_date" name="login_date"><option value="">无限制</option><option value="1">1天内</option><option value="3">3天内</option><option value="5">5天内</option><option value="7">7天内</option><option value="15">15天内</option><option value="30">30天内</option></select></div><div class="ct_2 person_num">已发人数: <span class="person_num_sended">--</span>人，总人数: <span class="person_num_all">--</span>人。</div></form><form id="form_content"><div class="message"><div class="message_header"><label class="radio message_type"><input type="radio" name="send_type" value="text" checked data-show=".message_text"><i class="iconfont icon-62d"></i><span class="opt_desc">文字消息</span></label><label class="radio message_type"><input type="radio" name="send_type" value="img_text" data-show=".message_graphical"><i class="iconfont icon-62f"></i><span class="opt_desc">图文消息</span></label><label class="radio message_type"><input type="radio" name="send_type" value="temp" data-show=".message_template"><i class="iconfont icon-665"></i><span class="opt_desc">模板消息</span></label></div><div class="message_body"><div class="grid message_text"><div class="ct text_info_ct"><textarea id="text_info" name="send_msg"></textarea></div><div class="ct message_text_footer"><i class="iconfont icon-6fc link2expression"></i></div></div><div class="grid message_graphical hidden"><div class="ct_6 field">图文消息ID</div><div class="ct_6-5"><input id="img_text_info" type="text" name="send_msg" disabled></div></div><ul class="message_template hidden"><li class="grid"><div class="ct_6 field">跳转URL</div><div class="ct_6-5"><input id="temp_url" type="text" name="temp_url" disabled value="http://laizhuan.com"></div></li><li class="grid"><div class="ct_6 field">模板消息ID</div><div class="ct_6-5"><select id="temp_id" name="temp_id" disabled></select></div></li></ul></div></div><div class="grid"><div class="ct_3-2 grid_nowrap"><div class="ct_4 field">发送数量</div><div class="ct_4-3"><input id="send_num" type="text" name="send_num" value="4000"></div></div><div class="ct_3 send_btn_ct"><button id="sendMsg" type="button" class="btn btn_success">群发</button></div></div></form></div></div><script src="http://git.bramble.wang/back/js/base.js"></script><script>$(function(){function e(){$.ajax({type:"POST",url:a,dataType:"json",data:$("#form_query,#form_content").serializeArray()}).always(function(e){d.hide(),t(),void 0!==e.flag?"1"==e.flag?$("#form_content").operTip("本轮发送成功!","success"):"0"==e.flag&&$("#form_content").operTip("本轮错误："+e.msg,"danger"):$(".message").operTip("程序发生错误!","danger")})}function n(){$.ajax({type:"POST",url:i,dataType:"json",data:$("#form_content").serializeArray()}).done(function(e){var n=[];$.each(e,function(e,t){var s='<li class="grid temp_msg_item"><div class="ct_6 field">'+t+'</div><div class="ct_6-5"><div class="grid_nowrap"><div class="ct_6 field_sec">value:</div><div class="ct_2"><input type="text" name="send_msg['+t+'][value]"></div><div class="ct_6 field_sec">color:</div><div class="ct_6"><input type="color" name="send_msg['+t+'][color]"></div></div></div></li>';n.push($(s))}),p.hide(),$(".message_template").append(n)}).fail(function(){p.hide(),$(".message").operTip("获取数据失败！",{theme:"danger"})})}function t(){$.ajax({url:a,dataType:"json",data:$("#form_query").serializeArray()}).always(function(e){if(e.num)$(".person_num_all").text(e.num),$(".person_num_sended").text(e.nowNum),cur_send_num=+e.nowNum;else{var n=e.msg||"获取人数信息失败！";$(".person_num").operTip(n,{theme:"danger",css:{left:"100px"}})}})}var s=base.host+"/module/getVersion",a=base.host+"/module/wexinPush",i=base.host+"/module/wexinTemp",o=["1.0","1.0.2","1.1.2","1.1.3","1.1.5","1.1.6","1.1.7","1.1.8","1.1.9","1.2.1","1.2.2","1.2.3","1.2.5","1.3.0"],r=["6.0","6.0.1","6.0.2","6.1","6.1.1","6.1.2","6.1.3","6.1.4","6.1.6","7.0","7.0.1","7.0.2","7.0.3","7.0.4","7.0.5","7.0.6","7.1","7.1.1","7.1.2","8.0","8.0.2","8.1","8.1.1","8.1.2","8.1.3","8.2","8.3","8.4","8.4.1","9.0","9.0.1","9.0.2","9.1","9.2","9.2.1","9.3"],c=new Mask({$ct:$(".content"),content:"数据加载中！"}),p=new Mask({$ct:$(".message_template"),content:"数据加载中！",isShow:!1}),d=new Mask({$ct:$("#form_content"),content:"发送中！",isShow:!1}),l=new Expression({$ct:$(".link2expression"),$toInput:$(".message_text textarea"),css:{left:"-16px","margin-left":"0px","margin-top":"20px"},triangleCss:{top:"-11px",left:"16px"}});$.ajax({url:s,dataType:"json"}).always(function(e){c.hide(),base.renderOption($("#app_version"),e.appVersion||o),base.renderOption($("#sys_version"),e.deviceVersion||r)}),$.ajax({url:i,dataType:"json"}).done(function(e){base.renderOption($("#temp_id"),e)}).fail(function(){$(".message").operTip("获取模板消息ID失败!","danger")}),$("body").on("click",'[name="send_type"]',function(){var e=$(this).val();"text"===e?l.hideByLocking():"temp"!==e||$(".message_template .field_sec").length||setTimeout(function(){$("#temp_id").trigger("change")},100)}).on("click","#sendMsg",function(){d.show(),e()}).on("change","#app_version,#sys_version,#login_date",function(){$(".person_num_all").text("--"),$(".person_num_sended").text("--"),t()}).on("change","#temp_id",function(){p.show(),$(".message_template li.temp_msg_item").remove(),n()}),t(),$(".message_text textarea").focus()})</script></body></html>